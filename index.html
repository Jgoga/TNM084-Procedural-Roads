<html>
	<head>
		<title>Procedural roads</title>
		<script type="text/javascript" src="assets/glMatrix-0.9.5.min.js"></script>
    	<script type="text/javascript" src="assets/webgl-utils.js"></script>
    	<script type="text/javascript" src="assets/PriorityQueue.js"></script>
    	<script src="assets/three.min.js"></script>
    	<script type="text/javascript" src="assets/OrbitControls.js"></script>
    	<script type="text/javascript" src="roadGeneration.js"></script>
    	<script type="text/javascript" src="maps.js"></script>
    	<!-- // <script type="text/javascript" src="setup.js"></script> -->
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 800%}
		</style>
	</head>
	<body>
		<script>
		var camera, controls, scene, renderer;
		var width, height;
		var whie, red;

		var queue, intersections ,geometry, pointMaterial;

		var render = function(){
			// controls.update();
			requestAnimationFrame( render );
			renderer.render(scene, camera);

			// geometry.vertices.push(new THREE.Vector3( 20*Math.random(), 20*Math.random(), 0));
			// geometry.verticesNeedUpdate = true;

		}

		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix(); 
			renderer.setSize( window.innerWidth, window.innerHeight );
		}

		function init(){
			width = window.innerWidth;
			height = window.innerHeight;

			white 	= new THREE.MeshBasicMaterial( { color: 0xffffff } );
			red 	= new THREE.MeshBasicMaterial( { color: 0xff0000 } );
			pointMaterial = new THREE.PointsMaterial( { color: 0xff0000, size: 2, sizeAttenuation: false } );

			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera(75, width/height, 0.1, 1000);
			camera.position.z = 800;
			renderer = new THREE.WebGLRenderer();
			renderer.setSize(width, height);
			// controls = new THREE.OrbitControls( camera, renderer.domElement );
			document.body.appendChild(renderer.domElement);

			queue = new PriorityQueue(function(r1, r2){
				return r2.t - r1.t;
			})

			// createTerrain();
			firstSegment();

			window.addEventListener( 'resize', onWindowResize, false );
			setInterval(createRoads, 0);
			render();
		}

		init();
		</script>
	</body>
</html>